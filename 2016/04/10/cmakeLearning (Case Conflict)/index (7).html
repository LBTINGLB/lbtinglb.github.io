<!DOCTYPE html>
<html lang="en,zh-Hanz,default">
    

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?ff152264e7864a4f4c07a049eae5646e";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="LBTING&#39; Blog">
    <title>cmakeLearning - LBTING&#39; Blog</title>
    <meta name="author" content="LBTING">
    <meta name="description" content="LBTING&#39; Blog">
    <link rel="icon" href="/assets/images/null">
    
        <link rel="alternative" type="application/atom+xml" title="RSS" href="atom.xml">
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style.min.css">
    <!--STYLES END-->
    
    
<script type="text/javascript">
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?ff152264e7864a4f4c07a049eae5646e";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</script>

</head>

    <body>
        <div id="blog">
            <header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="http://lbting.com">LBTING&#39; Blog</a>
    </h1>
    
        <a class="header-right-picture" href="/#about">
            <img class="header-picture" src="/assets/images/42.jpg"/>
        </a>
    
</header>
            <nav id="sidebar" data-behavior="1">
    
    <div class="sidebar-profile">
        <a href="/#about">
            
            <img class="sidebar-profile-picture" src="/assets/images/42.jpg"/>
            
        </a>
        <span class="sidebar-profile-name">LBTING</span>
    </div>
    
    
    <ul class="sidebar-buttons">
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link " href="/">
            
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">Home</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link " href="/all-categories">
            
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">Categories</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link " href="/all-tags">
            
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">Tags</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link st-search-show-outputs" href="/#search">
            
                    <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                    <span class="sidebar-button-desc">Search</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link " href="/#about">
            
                    <i class="sidebar-button-icon fa fa-lg fa-street-view"></i>
                    <span class="sidebar-button-desc">About me</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link " href="http://blog.blaulan.com/" target="_blank">
            
                    <i class="sidebar-button-icon fa fa-lg fa-beer"></i>
                    <span class="sidebar-button-desc">Eric</span>
                </a>
        </li>
        
    </ul>
    
    <ul class="sidebar-buttons">
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link " href="https://github.com/lbtinglb/lbtinglb.github.io" target="_blank">
            
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
    </ul>
    
    <ul class="sidebar-buttons">
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link " href="/atom.xml">
            
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">RSS</span>
                </a>
        </li>
        
    </ul>
    
</nav>
            <div id="main" data-behavior="1">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
        <div class="post-header main-content-wrap">
    
        <h1 class="post-title" itemprop="headline">cmakeLearning</h1>
    
    <div class="post-meta">
    <time  itemprop="datePublished" content="Sun Apr 10 2016 23:23:02 GMT-0400">
        Apr 10, 2016
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/technique/">technique</a>


    
</div>
</div>
    
    <div class="post-content markdown main-content-wrap" itemprop="articleBody">
        <p>My notes and reflection while learning CMake<br><img src="http://ecx.images-amazon.com/images/I/5136zUhjhXL._SX258_BO1,204,203,200_.jpg" alt="COVER"><br><a id="more"></a></p>
<p>#</p>
<!-- toc -->
<ul>
<li><a href="#helpful-learning-materials">Helpful learning materials</a></li>
<li><a href="#cmake-tutorial-by-john-lamp">CMake Tutorial By John lamp</a><ul>
<li><a href="#cmake-tutorial-chapter-1-getting-started">CMake Tutorial - Chapter 1: Getting Started</a></li>
<li><a href="#cmake-tutorial-chapter-2-ide-integration">CMake Tutorial - Chapter 2: IDE Integration</a></li>
<li><a href="#cmake-tutorial-chapter-3-gui-tool">CMake Tutorial &#x2013; Chapter 3: GUI Tool</a></li>
<li><a href="#cmake-tutorial-chapter-4-libraries-and-subdirectories">CMake Tutorial &#x2013; Chapter 4: Libraries and Subdirectories</a></li>
<li><a href="#cmake-tutorial-chapter-5-functionally-improved-testing">CMake Tutorial &#x2013; Chapter 5: Functionally Improved Testing</a></li>
<li><a href="#cmake-tutorial-chapter-6-realistically-getting-a-boost">CMake Tutorial &#x2013; Chapter 6: Realistically Getting a Boost</a></li>
</ul>
</li>
<li><a href="#derekmolly-cmake-tutorialhttpderekmolloyiehello-world-introductions-to-cmake"><a href="http://derekmolloy.ie/hello-world-introductions-to-cmake/" target="_blank" rel="external">Derekmolly CMake Tutorial</a></a><ul>
<li><a href="#introduction">Introduction</a></li>
</ul>
</li>
<li><a href="#others">others</a></li>
<li><a href="#3-tutorials">3. Tutorials</a><ul>
<li><a href="#31-configure-step">3.1 Configure step</a></li>
<li><a href="#36-variables">3.6 Variables</a><ul>
<li><a href="#361-scope-of-variable">3.6.1 Scope of variable</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h1 id="helpful-learning-materials"><a href="#Helpful-learning-materials" class="headerlink" title="Helpful learning materials"></a>Helpful learning materials</h1><blockquote>
<ul>
<li><a href="https://www.gitbook.com/book/tuannguyen68/learning-cmake-a-beginner-s-guide/details" target="_blank" rel="external">book reference (dead now)</a></li>
<li><a href="https://www.johnlamp.net/cmake-tutorial.html" target="_blank" rel="external">CMake Tutorial By John lamp</a></li>
<li><a href="https://cmake.org/cmake-tutorial/" target="_blank" rel="external">Official CMake Tutorial</a></li>
<li><a href="https://github.com/onqtam/awesome-cmake" target="_blank" rel="external">awesome-cmake</a> </li>
</ul>
</blockquote>
<h1 id="cmake-tutorial-by-john-lamp"><a href="#CMake-Tutorial-By-John-lamp" class="headerlink" title="CMake Tutorial By John lamp"></a>CMake Tutorial By John lamp</h1><blockquote>
<ul>
<li>What is CMake:<ul>
<li>What CMake does is generate a configuration for your existing build system, e.g. Make. This allows CMake to focus on things that most build systems don&#x2019;t; such as cross platform configuration, dependency calculation, testing, packaging, and installation.</li>
</ul>
</li>
<li>Why CMake:<ul>
<li>generate Makeflies or projects for a variety of IDEs.</li>
<li>tools for finding libraries and easily include external projects in the build<ul>
<li>you can use find tools instead of hard coding paths</li>
</ul>
</li>
<li>CTest</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="cmake-tutorial-chapter-1-getting-started"><a href="#CMake-Tutorial-Chapter-1-Getting-Started" class="headerlink" title="CMake Tutorial - Chapter 1: Getting Started"></a>CMake Tutorial - Chapter 1: Getting Started</h2><blockquote>
<ul>
<li>project(name):<ul>
<li>the <code>project</code> command names your project. <ul>
<li><em>Note</em>: If your project name contains spaces it must be surrounded by quotes</li>
</ul>
</li>
<li></li>
</ul>
</li>
<li>add_executable(target sources..)<ul>
<li>it tells CMake you want to make an executable and adds it as a target</li>
<li>target: name of the executable and the rest are the source files<ul>
<li>no need to include head files because CMake handles dependencies automatically</li>
</ul>
</li>
</ul>
</li>
<li>cmake_minimum_required(VERSION version FATAL_ERROR):<ul>
<li>specify minimum version of CMake<ul>
<li>recommended that this command be used in all top level CMakeList.txt</li>
</ul>
</li>
</ul>
</li>
<li>enable_testing()<ul>
<li>Enable testing for this CMake project. This should only be used in top level <em>CMakeLists.txt</em>. The main thing this does is enable the <em>add_test()</em> command.</li>
</ul>
</li>
<li>add_test(testname executable arg1 &#x2026;)<ul>
<li>This command only does something if the enable_testing() has already been run, otherwise it does nothing.</li>
</ul>
</li>
<li><p>PS: Examle of EXPECT_EQUAL is interesting</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> EXPECT_EQUAL(test, expect) equalityTest( test,  expect, \</span></div><div class="line">                                                #test, #expect, \</div><div class="line">                                                __FILE__, __LINE__)</div><div class="line"><span class="keyword">template</span> &lt; <span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2 &gt;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">equalityTest</span><span class="params">(</span></span></div><div class="line">    <span class="keyword">const</span> T1    testValue,</div><div class="line">    <span class="keyword">const</span> T2    expectedValue,</div><div class="line">    <span class="keyword">const</span> <span class="keyword">char</span>* testName,</div><div class="line">    <span class="keyword">const</span> <span class="keyword">char</span>* expectedName,</div><div class="line">    <span class="keyword">const</span> <span class="keyword">char</span>* fileName,</div><div class="line">    <span class="keyword">const</span> <span class="keyword">int</span>   lineNumber</div><div class="line">)</div><div class="line">{</div><div class="line">    <span class="keyword">if</span> (testValue != expectedValue)</div><div class="line">    {</div><div class="line">        <span class="built_in">cerr</span> &lt;&lt; fileName &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; lineNumber &lt;&lt; <span class="string">&quot;: &quot;</span></div><div class="line">             &lt;&lt; <span class="string">&quot;Expected &quot;</span> &lt;&lt; testName &lt;&lt; <span class="string">&quot; &quot;</span></div><div class="line">             &lt;&lt; <span class="string">&quot;to equal &quot;</span> &lt;&lt; expectedName &lt;&lt; <span class="string">&quot; (&quot;</span> &lt;&lt; expectedValue &lt;&lt; <span class="string">&quot;) &quot;</span></div><div class="line">             &lt;&lt; <span class="string">&quot;but it was (&quot;</span> &lt;&lt; testValue &lt;&lt; <span class="string">&quot;)&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">else</span></div><div class="line">    {</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>
</li>
<li><p><code>make test</code> ( or <code>ninja test</code>)</p>
<ul>
<li>The enable_testing() function we added to our CMakeLists.txt adds the &#x201C;test&#x201D; target to our Makefile. Making the &#x201C;test&#x201D; target will run CTest which will, in turn, run all of our tests. In our case just the one.</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="cmake-tutorial-chapter-2-ide-integration"><a href="#CMake-Tutorial-Chapter-2-IDE-Integration" class="headerlink" title="CMake Tutorial - Chapter 2: IDE Integration"></a>CMake Tutorial - Chapter 2: IDE Integration</h2><blockquote>
<ul>
<li>make test<ul>
<li>Making the &#x201C;test&#x201D; target will run CTest which will, in turn, run all of our tests</li>
</ul>
</li>
<li>visual studio<ul>
<li>ALL_BUILD<ul>
<li>This project builds all of the targets that are defined in the CMakeLists.txt. Since we only have one in ours it is a bit redundant.</li>
</ul>
</li>
<li>RUN_TEST<ul>
<li>Building this project runs CTest in much the same way that make test did. It creates the same output files, too. CTest&#x2019;s output is also displayed in the Output Window. Just as before this does not depend on any of your targets, so if your tests depend on any targets be sure to build them first.</li>
</ul>
</li>
<li>YOUR_PROJECT<ul>
<li>It corresponds to the add_executable command we have in our CMakeLists.txt.</li>
</ul>
</li>
<li>ZERO_CHECK<ul>
<li>It&#x2019;s purpose is to make sure that the Visual Studio solution and its projects are all up to date.</li>
<li>If you modify the CMakeLists.txt this project will update your Visual Studio solution. All other projects depend on this one so you don&#x2019;t have to build it manually.</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="cmake-tutorial-chapter-3-gui-tool"><a href="#CMake-Tutorial-&#x2013;-Chapter-3-GUI-Tool" class="headerlink" title="CMake Tutorial &#x2013; Chapter 3: GUI Tool"></a>CMake Tutorial &#x2013; Chapter 3: GUI Tool</h2><blockquote>
<ul>
<li>CMake command<ul>
<li>if(&#x2026;), elseif(&#x2026;), else(), endif()</li>
<li>set()</li>
</ul>
</li>
<li>be careful with <em>warnings</em>. They are potential <em>bugs</em>.</li>
<li>CMAKE_BUILD_TYPE<ul>
<li>This variable controls the type of build to be done. The possible values are empty, Debug, Release, RelWithDebInfo, and MinSizeRel.</li>
</ul>
</li>
<li>CMake Cache:<ul>
<li>just check the <code>Advanced</code> box</li>
</ul>
</li>
<li><code>(if (NOT CONFIGURED_ONCE)</code></li>
<li>set(variableName value &#x2026; CACHE type docstring FORCE)<ul>
<li>FORCE - Force this entry to be set in the cache. Normally if a variable already exists in the cache future attempts to set it will be ignored unless FORCE is the last argument.</li>
</ul>
</li>
<li>CMake Curses Interface (ccmake)<ul>
<li>It can be useful if you often connect to your build machine via an ssh session or you don&#x2019;t want the dependency of Qt, which the GUI requires.</li>
</ul>
</li>
<li>CMake cache:<ul>
<li>It stores some variables persistently between individual runs of CMake</li>
<li>edit variables in the cache via CMake GUI or the curses interface ccmake</li>
<li>why we update the compiler flags in the cache<ul>
<li><ol>
<li>Check the compiler flags easily</li>
</ol>
</li>
<li><ol>
<li>edit the flags using CMake GUI</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li>LB&#x2019;s reflection:<ul>
<li>for a single easy project, you need to set:<ul>
<li><code>cmake_minimum_required</code></li>
<li><code>project</code></li>
<li>possible warning control commandsc</li>
<li><code>add_executable</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="cmake-tutorial-chapter-4-libraries-and-subdirectories"><a href="#CMake-Tutorial-&#x2013;-Chapter-4-Libraries-and-Subdirectories" class="headerlink" title="CMake Tutorial &#x2013; Chapter 4: Libraries and Subdirectories"></a>CMake Tutorial &#x2013; Chapter 4: Libraries and Subdirectories</h2><blockquote>
<ul>
<li>why we make library:<ul>
<li>CMake will compile source files once for each target that includes them </li>
</ul>
</li>
<li><code>include_directories(directories)</code><ul>
<li>Add directories to the end of this directory&#x2019;s include paths. </li>
</ul>
</li>
<li><code>CMAKE_CURRENT_SOURCE_DIR</code><ul>
<li>The full path to the source directory that CMake is currently processing.</li>
<li>so here we use: <em>include_directories(${CMAKE_CURRENT_SOURCE_DIR})</em></li>
</ul>
</li>
<li><code>add_subdirectory(source_dir binary_dir)</code><ul>
<li>Include the directory source_dir in your project. This directory must contain a CMakeLists.txt file.</li>
<li>When adding a directory that is a subdirectory of the current directory CMake will automatically determine what the binary output directory should be, making the second argument optional. However if you add a directory that isn&#x2019;t a subdirectory you need to specify the binary output directory.</li>
</ul>
</li>
<li><code>target_link_libraries(target library&#x2026;)</code><ul>
<li>Specify that target needs to be linked against one or more libraries. If a library name matches another target dependencies are setup automatically so that the libraries will be built first and target will be updated whenever any of the libraries are.</li>
</ul>
</li>
<li><code>add_library(target STATIC | SHARED | MODULE sources&#x2026;)</code><ul>
<li>This command creates a new library target built from sources. As you may have noticed this command is very similar to add_executable.</li>
<li><code>STATIC</code>: archives of object files that are linked dirctly into other targets<ul>
<li>copying all library routines used in the program into the executable image. </li>
<li>more space but faster!</li>
</ul>
</li>
<li><code>SHARED</code>: linked dynamically and loaded at runtime<ul>
<li>multiple programs can share a single copy of the library! Save space!</li>
</ul>
</li>
<li><code>module</code>: plugins that aren&#x2019;t linked against but can be loaded dynamically at runtime</li>
</ul>
</li>
<li><code>CMAKE_BINARY_DIR</code><ul>
<li>This variable holds the path to the top level binary output directory, i.e. the directory in which you ran the cmake command or the path you chose for &#x201C;Where to build the binaries&#x201D; in the GUI.</li>
</ul>
</li>
<li><code>set_property</code><ul>
<li>change the compipler flags for different target.</li>
<li>for instance:<ul>
<li>set_property(TARGET gtest APPEND_STRING PROPERTY COMPILE<em>FLAGS &#x201D; -w&#x201D;)<br>There are a variety of things that have properties in CMake, in this case we are interested in a target&#x2019;s properties. Each target can have it&#x2019;s own compiler flags in addition the ones set in CMAKE</em><lang>_FLAGS. Here we append &#x201C; -w&#x201D; to gtest&#x2018;s COMPILE_FLAGS. The flag &#x201C;-w&#x201D; disables all warnings for both GCC and Clang. When compiling with MSVC the &#x201C;-w&#x201D; will be automatically converted to &#x201C;/w&#x201D; which has the same function. </lang></li>
</ul>
</li>
</ul>
</li>
<li>LB&#x2019;s reflection:<ul>
<li>for a library involved project:<ul>
<li><code>cmake_minimum_required</code></li>
<li><code>project</code></li>
<li>possible warning control commands</li>
<li><code>add_executable</code></li>
</ul>
</li>
</ul>
</li>
<li></li>
</ul>
</blockquote>
<h2 id="cmake-tutorial-chapter-5-functionally-improved-testing"><a href="#CMake-Tutorial-&#x2013;-Chapter-5-Functionally-Improved-Testing" class="headerlink" title="CMake Tutorial &#x2013; Chapter 5: Functionally Improved Testing"></a>CMake Tutorial &#x2013; Chapter 5: Functionally Improved Testing</h2><blockquote>
<ul>
<li>lists<ul>
<li>CMake has two data structures built in : <em>strings</em> and <em>lists</em><ul>
<li><code>set (MyList a b c)</code></li>
<li><h2 id="cmake-tutorial-chapter-6-realistically-getting-a-boost"><a href="#CMake-Tutorial-&#x2013;-Chapter-6-Realistically-Getting-a-Boost" class="headerlink" title="CMake Tutorial &#x2013; Chapter 6: Realistically Getting a Boost"></a>CMake Tutorial &#x2013; Chapter 6: Realistically Getting a Boost</h2></li>
</ul>
</li>
</ul>
</li>
<li>TBL</li>
</ul>
</blockquote>
<h1 id="derekmolly-cmake-tutorial"><a href="#Derekmolly-CMake-Tutorial" class="headerlink" title="Derekmolly CMake Tutorial"></a><a href="http://derekmolloy.ie/hello-world-introductions-to-cmake/" target="_blank" rel="external">Derekmolly CMake Tutorial</a></h1><h2 id="introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><blockquote>
<ul>
<li><code>cmake_minimum_required</code></li>
<li><code>project</code></li>
<li><code>add_executable(executable-file-name file-you-want-to-add)</code></li>
<li><code>include_directories</code><ul>
<li>use this command when you have a directory</li>
</ul>
</li>
<li><code>set(variable-name whatever-file-you-want-to-add)</code></li>
<li><code>file(parameter variable-name whatever-file-you-want-to-add)</code>:  similar to set, but you can use wildcard additiions<br>Build a Shared Library</li>
</ul>
</blockquote>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span>.<span class="number">9</span>)</div><div class="line"><span class="keyword">project</span>(directory_test)</div><div class="line"><span class="keyword">set</span>(CMAKE_BUILD_TYPE Release)</div><div class="line"></div><div class="line"><span class="comment">#Bring the headers, such as Student.h into the project</span></div><div class="line"><span class="keyword">include_directories</span>(<span class="keyword">include</span>)</div><div class="line"></div><div class="line"><span class="comment">#However, the file(GLOB...) allows for wildcard additions:</span></div><div class="line">file(GLOB SOURCES <span class="string">&quot;src/*.cpp&quot;</span>)</div><div class="line"></div><div class="line"><span class="comment">#Generate the shared library from the sources</span></div><div class="line"><span class="keyword">add_library</span>(testStudent SHARED <span class="variable">${SOURCES}</span>)</div><div class="line"></div><div class="line"><span class="comment">#Set the location for library installation -- i.e., /usr/lib in this case</span></div><div class="line"><span class="comment"># not really necessary in this example. Use &quot;sudo make install&quot; to apply</span></div><div class="line"><span class="keyword">install</span>(TARGETS testStudent DESTINATION /usr/lib)</div></pre></td></tr></table></figure>
<blockquote>
<ul>
<li><code>add_library()</code><ul>
<li>if you want to build a library rather than a executable you should use this command</li>
</ul>
</li>
<li><code>install()</code><ul>
<li>define an installation location for the library </li>
</ul>
</li>
<li><code>ldd any-library-name</code><ul>
<li>display the shared library dependencies<br>Build a Static Library:<br>Using a shared or Static Library </li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="others"><a href="#others" class="headerlink" title="others"></a>others</h1><blockquote>
<ul>
<li>how to turn on all compile warnings: add <code>-Wall</code> to cxx_flag in ccmake</li>
<li><p>target_link_libraries</p>
<ul>
<li><p><a href="https://cmake.org/cmake/help/v3.0/command/target_link_libraries.html" target="_blank" rel="external">LINK_PRIVATWE VS LINK_PRIVATE</a></p>
</li>
<li><p><code>PRIVATE</code> VS <code>PUBLIC</code> VS <code>INTERFACE</code></p>
<ul>
<li><a href="http://stackoverflow.com/questions/26037954/cmake-target-link-libraries-interface-dependencies" target="_blank" rel="external">clarification</a></li>
</ul>
</li>
<li><code>link_private</code> VS <code>link_public</code><ul>
<li><a href="http://stackoverflow.com/questions/21125362/cmake-link-private-and-its-inheritance" target="_blank" rel="external">clarification</a></li>
<li>link_private: makes transitive dependencies of the currently linked target invisible to other targets which are going to be linked against the current one</li>
<li>link_public:  makes transitive dependencies of the currently linked target visible to other targets which are going to be linked against the current one</li>
</ul>
</li>
</ul>
</li>
<li><a href="http://doc.qt.io/qtcreator/creator-project-cmake.html" target="_blank" rel="external">CMAKE + QTCreator</a></li>
<li>MSVC:<ul>
<li>/EHsc flag: Exception Handling Model</li>
</ul>
</li>
<li><a href="https://cmake.org/Wiki/CMake/Testing_With_CTest" target="_blank" rel="external">CTest</a><ul>
<li>a testing tool distributed as a part of CMake <ul>
<li>first mode, CMake is used to configure and build a project, using special commands in the CMakeLists.txt file to create tests</li>
<li>second mode, CTest runs a script (using the same syntax as CMakeLists.txt) to control the whole process of checking out / updating source code,</li>
</ul>
</li>
<li>quick and dirty way pm ctest:<ul>
<li>copy a similar file, edit it, add to CMakeLlists.txt and use  <code>ctest -R testFileName</code> in the build folder </li>
<li>ctest &#x2013;rerun-failed -VV 2&gt;&amp;1 | less</li>
<li>ctest &#x2013;rerun-failed -VV</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>Running individual  Tests<ul>
<li><ol>
<li><code>-R</code> and <code>-E</code>: specify the regular expression</li>
</ol>
<ul>
<li><code>-R</code>: specifies tests to be <em>included</em> </li>
<li><code>-E</code>: specifies tests to be <em>removed</em></li>
<li><code>-N</code>: see what tests are  available</li>
<li><code>-v</code>: show debug log</li>
</ul>
<ol>
<li><code>-I</code>: using explicit test number option </li>
</ol>
</li>
</ul>
<ul>
<li>find memory leak - <em>purify</em> or <em>Valgrind</em></li>
</ul>
</li>
<li>check the test log <ul>
<li><code>ls Testing/Temporary/lastTest.log</code></li>
</ul>
<ul>
<li>staic vs shared libray:</li>
</ul>
</li>
<li><code>shared library</code>: file ended in <strong>.so</strong>(or in Windows as <strong>.dll</strong> in OS x <strong>.dylib</strong>). All the code relating to the library is in this file, and it&#x2019;s referenced by programs using it at <em>run-time</em>.<ul>
<li>reduce the amount of code that&#x2019;s duplicated, keep the binary small.</li>
<li>have performance benefit without recompile the program</li>
<li>additional runtime loading cost</li>
</ul>
</li>
<li><code>Static library</code>: file ended in <strong>.a</strong>. All the code relating to the library is in this file, and it&#x2019;s directly linked into the program at compile time.  <ul>
<li>increase the overall size of the binary, but you do not need a copy of the library that&#x2019;s being used</li>
</ul>
<ul>
<li>CMake Error: strongly connected component (cycle)</li>
<li><code>ninja edit_cache</code>: view cache in terminal via nina</li>
</ul>
</li>
</ul>
</blockquote>
<p><a href="https://cgold.readthedocs.io/en/latest/" target="_blank" rel="external">CGold: The Hitchhiker&#x2019;s Guide to the CMake</a></p>
<h1 id="3-tutorials"><a href="#3-Tutorials" class="headerlink" title="3. Tutorials"></a>3. Tutorials</h1><blockquote>
<ul>
<li><code>-G &lt;generator-name&gt;</code>: specify the generator you want to use   </li>
<li><code>-H. -B_builds</code>: specify the builder path<h2 id="31-configure-step"><a href="#3-1-Configure-step" class="headerlink" title="3.1 Configure step"></a>3.1 Configure step</h2></li>
<li>CMake will parse top level CMakeLists.txt of source tree and create CMakeCache.txt file with cache variables.</li>
<li><code>cmake --build your-build-directory</code>: cmake would call native build tool  to build the project</li>
<li>you must have <code>project</code> command in your top level CMakeLists.txt<br>#3.4</li>
<li>how to keep using old CMake polices.<h2 id="36-variables"><a href="#3-6-Variables" class="headerlink" title="3.6 Variables"></a>3.6 Variables</h2></li>
<li>cache variables: which would live in CmakeCache.txt outside CMake runs.<ul>
<li><code>set(variable-name CACHE value)</code> <h3 id="361-scope-of-variable"><a href="#3-6-1-Scope-of-variable" class="headerlink" title="3.6.1 Scope of variable"></a>3.6.1 Scope of variable</h3></li>
</ul>
</li>
<li>commands as <code>add_subdirectory</code> and <code>function</code> would introduce new scope</li>
<li><code>macro</code> and <code>include</code> would not introduce new scope</li>
<li>how to set a value that would only affect parent scope <code>set (variable_name Value PARENT_SCOPE)</code></li>
<li>variables always have type string but some commands can interpret them differently. For example, <code>if</code> can treat strings as boolean, path, target name, etc</li>
<li>create a list:<ul>
<li><code>set(10 a b c)</code>, <code>set(11 a;b;c)</code></li>
<li>operations: <code>list</code> command can used to get length <code>list(LENGTH list_name list_length_variable)</code>, you can replace <code>LENGTH</code> with <code>GET</code>, <code>REMOVE_AT</code><br>-</li>
</ul>
</li>
</ul>
</blockquote>

        
            
        
    </div>
    <div class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/C/">C++</a> <a class="tag tag--primary tag--small t-link" href="/tags/CMake/">CMake</a> <a class="tag tag--primary tag--small t-link" href="/tags/Kitware/">Kitware</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2016/04/11/runningTraining-md/"  data-tooltip="running training">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2016/03/18/VTKStudy/" data-tooltip="VTKStudy">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://lbting.com/2016/04/10/CMakeLearning/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://lbting.com/2016/04/10/CMakeLearning/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://lbting.com/2016/04/10/CMakeLearning/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
    </ul>
</div>


        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2017 LBTING. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="1">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2016/04/11/runningTraining-md/"  data-tooltip="running training">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2016/03/18/VTKStudy/" data-tooltip="VTKStudy">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://lbting.com/2016/04/10/CMakeLearning/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://lbting.com/2016/04/10/CMakeLearning/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://lbting.com/2016/04/10/CMakeLearning/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
    </ul>
</div>


                </div>
            
        </div>
        <div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/42.jpg"/>
        
            <h4 id="about-card-name">LBTING</h4>
        
            <h5 id="about-card-bio"><p>“They’re both convinced that a sudden passion joined them.Such certainty is beautiful.But uncertainty is more beautiful still.</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>R&amp;D Engineer</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Albany USA
            </h5>
        
    </div>
</div>
        <div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/script.min.js"></script>
<!--SCRIPTS END-->



</html>
